â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ END-TO-END ENCRYPTION FLOW - SIMPLE EXPLANATION                            â”‚
â”‚ Just Between Us - How Your Messages Stay Private                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
OVERVIEW: WHAT IS END-TO-END ENCRYPTION?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

End-to-End Encryption (E2EE) means:
  â€¢ Messages are encrypted BEFORE leaving your device
  â€¢ Server CANNOT read your messages (only sees scrambled data)
  â€¢ Only people with the encryption key can decrypt and read messages
  â€¢ Even if the server is hacked, your messages stay private

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 1: ROOM CREATION & KEY GENERATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER A     â”‚
â”‚  (Alice)     â”‚
â”‚              â”‚
â”‚ Clicks:      â”‚
â”‚ "CREATE      â”‚
â”‚  ROOM"       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Generate 256-bit encryption key
       â”‚    (Random secret code)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”‘ ENCRYPTION KEY          â”‚
â”‚  Generated:                 â”‚
â”‚  "aB3dEf9GhIjKlMn..."      â”‚
â”‚  (32 random bytes)          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Store key in URL fragment
       â”‚    Format: /room/abc123#key=aB3dEf9GhIj...
       â”‚
       â”‚ âš ï¸ IMPORTANT: URL fragments (#...) are NEVER sent to server!
       â”‚    The key stays in your browser only
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  URL Created:               â”‚
â”‚  /room/abc123#key=aB3dEf9GhIjâ”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚    Room ID    Encryption Key â”‚
â”‚              (in fragment)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 2: SHARING THE KEY (OUT-OF-BAND)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER A     â”‚                    â”‚   USER B     â”‚
â”‚  (Alice)     â”‚                    â”‚   (Bob)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                    â”‚
       â”‚ 1. Copy full URL with key         â”‚
       â”‚    /room/abc123#key=aB3dEf9GhIj...â”‚
       â”‚                                    â”‚
       â”‚ 2. Share via secure channel        â”‚
       â”‚    â€¢ Signal / WhatsApp            â”‚
       â”‚    â€¢ Email                         â”‚
       â”‚    â€¢ In-person                     â”‚
       â”‚                                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
                                           â”‚
                                           â”‚ 3. Opens URL
                                           â”‚    Browser extracts key
                                           â”‚    from URL fragment
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  USER B      â”‚
                                    â”‚  Has Key!    â”‚
                                    â”‚  ğŸ”‘          â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 3: SENDING AN ENCRYPTED MESSAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER A     â”‚
â”‚              â”‚
â”‚ Types:       â”‚
â”‚ "Hello Bob!" â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Encrypt message with ğŸ”‘
       â”‚    (AES-256-GCM encryption)
       â”‚    â€¢ Generate random IV (12 bytes)
       â”‚    â€¢ Encrypt text with key + IV
       â”‚    â€¢ Combine IV + encrypted data
       â”‚    â€¢ Encode to Base64
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”’ ENCRYPTED MESSAGE       â”‚
â”‚  "xK9mP2qR5sT8vW..."        â”‚
â”‚  (Base64 encoded)           â”‚
â”‚                             â”‚
â”‚  Format:                    â”‚
â”‚  [IV][Encrypted Data]       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Send to Server
       â”‚    POST /api/messages
       â”‚    { text: "xK9mP2qR5sT8vW..." }
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸŒ SERVER                                      â”‚
â”‚                                                                         â”‚
â”‚  Receives:                                                              â”‚
â”‚  {                                                                      â”‚
â”‚    text: "xK9mP2qR5sT8vW..."  â† Encrypted!                              â”‚
â”‚    sender: "red-monkey-abc"                                            â”‚
â”‚    roomId: "abc123"                                                     â”‚
â”‚  }                                                                      â”‚
â”‚                                                                         â”‚
â”‚  âŒ Server CANNOT read the message                                      â”‚
â”‚  âŒ Server does NOT have the encryption key                            â”‚
â”‚  âœ… Server only stores encrypted data                                   â”‚
â”‚                                                                         â”‚
â”‚  Stores in Redis & broadcasts to other users                            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Broadcast encrypted message
       â”‚    (WebSocket event)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER B     â”‚
â”‚              â”‚
â”‚ Receives:    â”‚
â”‚ "xK9mP2qR5sT8vW..."  â† Still encrypted!
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Decrypt with ğŸ”‘
       â”‚    â€¢ Extract IV from message
       â”‚    â€¢ Decrypt with key + IV
       â”‚    â€¢ Convert bytes to text
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER B     â”‚
â”‚              â”‚
â”‚ Sees:        â”‚
â”‚ "Hello Bob!" â”‚  â† Plaintext!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ENCRYPTION PROCESS DETAILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ENCRYPTION (When sending):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  Plaintext: "Hello Bob!"                                               â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”‚ 1. Generate random IV (12 bytes)                               â”‚
â”‚       â”‚    Each message gets unique IV                                 â”‚
â”‚       â–¼                                                                 â”‚
â”‚  [Random IV: 0x3A, 0x7F, ...]                                          â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”‚ 2. Encrypt with AES-256-GCM                                    â”‚
â”‚       â”‚    Key: aB3dEf9GhIj... (256-bit)                              â”‚
â”‚       â”‚    IV: Random 12 bytes                                         â”‚
â”‚       â–¼                                                                 â”‚
â”‚  Encrypted Data: [0x8F, 0x2A, 0x9B, ...]                               â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”‚ 3. Combine IV + Encrypted Data                                 â”‚
â”‚       â”‚    Format: [IV (12 bytes)][Encrypted Data]                     â”‚
â”‚       â–¼                                                                 â”‚
â”‚  Combined: [IV][Encrypted]                                             â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”‚ 4. Encode to Base64                                            â”‚
â”‚       â–¼                                                                 â”‚
â”‚  Base64: "Ol8sXy5hYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eg=="                â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DECRYPTION (When receiving):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  Base64: "Ol8sXy5hYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eg=="                â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”‚ 1. Decode from Base64                                          â”‚
â”‚       â–¼                                                                 â”‚
â”‚  Combined: [IV][Encrypted]                                             â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”‚ 2. Extract IV and Encrypted Data                              â”‚
â”‚       â”‚    First 12 bytes = IV                                         â”‚
â”‚       â”‚    Rest = Encrypted Data                                       â”‚
â”‚       â–¼                                                                 â”‚
â”‚  IV: [0x3A, 0x7F, ...]                                                 â”‚
â”‚  Encrypted: [0x8F, 0x2A, 0x9B, ...]                                    â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”‚ 3. Decrypt with AES-256-GCM                                    â”‚
â”‚       â”‚    Key: aB3dEf9GhIj... (same key)                              â”‚
â”‚       â”‚    IV: Extracted from message                                  â”‚
â”‚       â–¼                                                                 â”‚
â”‚  Decrypted Bytes: [72, 101, 108, 108, 111, ...]                        â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”‚ 4. Convert bytes to text                                       â”‚
â”‚       â–¼                                                                 â”‚
â”‚  Plaintext: "Hello Bob!"                                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COMPLETE MESSAGE FLOW DIAGRAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER A     â”‚                    â”‚   SERVER     â”‚                    â”‚   USER B     â”‚
â”‚  (Alice)     â”‚                    â”‚              â”‚                    â”‚   (Bob)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                    â”‚                                    â”‚
       â”‚ 1. Create Room                    â”‚                                    â”‚
       â”‚    Generate Key ğŸ”‘                â”‚                                    â”‚
       â”‚    Store in URL fragment          â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚
       â”‚ 2. Share URL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚    (Out of band - Signal, etc.)    â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚ 3. Extract Key
       â”‚                                    â”‚                                    â”‚    from URL
       â”‚                                    â”‚                                    â”‚
       â”‚ 4. Type Message                   â”‚                                    â”‚
       â”‚    "Hello Bob!"                   â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚
       â”‚ 5. Encrypt with ğŸ”‘                â”‚                                    â”‚
       â”‚    "xK9mP2qR5sT8vW..."           â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚
       â”‚ 6. Send Encrypted â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                                    â”‚
       â”‚    POST /api/messages             â”‚                                    â”‚
       â”‚    { text: "xK9mP2qR5sT8vW..." } â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚
       â”‚                                    â”‚ 7. Store encrypted                 â”‚
       â”‚                                    â”‚    (Cannot read it!)               â”‚
       â”‚                                    â”‚                                    â”‚
       â”‚                                    â”‚ 8. Broadcast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
       â”‚                                    â”‚    WebSocket event                 â”‚
       â”‚                                    â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚ 9. Receive Encrypted
       â”‚                                    â”‚                                    â”‚    "xK9mP2qR5sT8vW..."
       â”‚                                    â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚ 10. Decrypt with ğŸ”‘
       â”‚                                    â”‚                                    â”‚     "Hello Bob!"
       â”‚                                    â”‚                                    â”‚
       â”‚                                    â”‚                                    â”‚ 11. Display Message
       â”‚                                    â”‚                                    â”‚

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECURITY GUARANTEES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… END-TO-END ENCRYPTION
   â€¢ Messages encrypted BEFORE leaving your device
   â€¢ Server only sees encrypted Base64 strings
   â€¢ Server CANNOT decrypt without the key

âœ… ZERO-KNOWLEDGE ARCHITECTURE
   â€¢ Encryption keys stored in URL fragments (#key=...)
   â€¢ URL fragments NEVER sent to server (browser-only)
   â€¢ Keys only exist in browser memory

âœ… FORWARD SECRECY
   â€¢ Each message uses unique random IV (Initialization Vector)
   â€¢ Same message encrypted twice = different ciphertext
   â€¢ Even if one message is compromised, others stay safe

âœ… AUTHENTICATED ENCRYPTION
   â€¢ AES-GCM provides message authentication
   â€¢ Detects tampering or corruption
   â€¢ Ensures message integrity

âœ… NO EXTERNAL DEPENDENCIES
   â€¢ Uses browser Web Crypto API (built-in)
   â€¢ No third-party encryption libraries
   â€¢ Standard, audited cryptographic algorithms

âœ… CLIENT-SIDE ONLY
   â€¢ All encryption/decryption happens in browser
   â€¢ No server-side encryption processing
   â€¢ Keys never leave your device

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TECHNICAL DETAILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Encryption Algorithm: AES-256-GCM
  â€¢ AES: Advanced Encryption Standard (industry standard)
  â€¢ 256-bit: Very strong encryption (2^256 possible keys)
  â€¢ GCM: Galois/Counter Mode (provides authentication)

Key Generation:
  â€¢ 32 random bytes (256 bits)
  â€¢ Generated using crypto.getRandomValues() (cryptographically secure)
  â€¢ Encoded as URL-safe Base64 for sharing

IV (Initialization Vector):
  â€¢ 12 random bytes per message
  â€¢ Ensures same message encrypted twice looks different
  â€¢ Included with each encrypted message

Key Storage:
  â€¢ Stored in URL fragment (#key=...)
  â€¢ URL fragments are NOT sent to server in HTTP requests
  â€¢ Only visible in browser JavaScript
  â€¢ Stored in React component state (memory only)

Message Format:
  â€¢ Base64 encoded string
  â€¢ Contains: [IV (12 bytes)][Encrypted Data + Auth Tag]
  â€¢ IV extracted during decryption

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
WHAT THE SERVER SEES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Server receives:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  {                                                                      â”‚
â”‚    id: "xyz789",                                                       â”‚
â”‚    sender: "red-monkey-abc",                                           â”‚
â”‚    text: "Ol8sXy5hYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eg==",              â”‚
â”‚    timestamp: 1234567890,                                              â”‚
â”‚    roomId: "abc123"                                                    â”‚
â”‚  }                                                                      â”‚
â”‚                                                                         â”‚
â”‚  âŒ Server CANNOT read "text" field                                    â”‚
â”‚  âŒ Server does NOT have encryption key                                â”‚
â”‚  âŒ Server cannot decrypt messages                                     â”‚
â”‚  âœ… Server only stores and forwards encrypted data                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
KEY SHARING METHODS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

The encryption key is shared OUT-OF-BAND (outside the application):

âœ… Secure Methods:
   â€¢ Signal / WhatsApp (encrypted messaging apps)
   â€¢ Email (if using encrypted email)
   â€¢ In-person (tell them the URL)
   â€¢ Secure note sharing apps

âš ï¸ Less Secure (but still works):
   â€¢ Regular SMS (not encrypted)
   â€¢ Regular email (not encrypted)
   â€¢ Social media DM (depends on platform)

The key is in the URL fragment, so sharing the URL = sharing the key.

Example URL:
  https://yourapp.com/room/abc123#key=aB3dEf9GhIjKlMnOpQrStUvWxYz123456

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Room creator generates encryption key (256-bit random)
2. Key stored in URL fragment (never sent to server)
3. Key shared out-of-band (Signal, WhatsApp, etc.)
4. Both users have the key in their browsers
5. Messages encrypted BEFORE sending to server
6. Server stores encrypted data (cannot read it)
7. Messages decrypted AFTER receiving from server
8. Only users with the key can read messages

Result: True end-to-end encryption with zero-knowledge architecture!
